## 跨域

浏览器为了保证用户信息安全，防止恶意的网站攻击，实行同源限制策略

协议相同、域名相同、端口相同



如果是非同源，DOM 无法获得，AJAX 请求不能发送，cookie localStorage 无法读取



跨域解决方式

* CORS 方式

  浏览器会向服务器发送一个Preflight请求，这种请求使用OPTIONS方法，发送下列头部。

  > Origin: 与简单的请求相同
  >
  > Access-Control-Request-Method:请求自身使用的方法
  >
  > Access-Control-Request-Headers:（可选）自定义的头部信息

  发送这个请求后，服务器可以决定是否允许这种类型的请求。服务器通过在响应中发送如下头部与浏览器进行沟通    

  > Access-Control-Allow-Origin: 与请求头中的Origin相同
  >
  > Access-Control-Allow-Methods:允许的方法，
  >
  > Access-Control-Allow-Headers:允许的头部
  >
  > Access-Control-Max-Age:应该将这个Preflight请求缓存多长时间

* 代理跨域 node服务

  如果在本地的服务localhost:8080想要访问`www.njc.com`域下的资源，那么由于同源限制策略，会请求失败。我们可以在请求发送前加入中间层，将不同的域名转换成相同的域名。客户端发请求时，不直接到服务器，先到代理的中间层，在将请求发送到服务器。当服务器返回数据的时候，也是先到代理层。



* websocket

  websocket协议不受同源策略的影响，只要服务器端支持，无需配置就支持跨域。ws wss