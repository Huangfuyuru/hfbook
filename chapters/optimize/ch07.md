## 减少DNS查找

##### 影响DNS缓存的因素

1. DNS 记录存活时间 (TTL)，该值告诉客户端可以对该记录缓存多久。
2. 浏览器对缓存的DNS记录的数量也有限制，而不管缓存记录的时间。



##### 减少DNS查找

方法一： 较少的域名

当客户端的DNS缓存为空时，DNS查找的数量与Web页面中唯一主机名的数量相等，包括页面URL、图片、脚本文件、样式表、Flash对象等的主机名。减少唯一主机名的数量可以减少DNS查找的数量。

但是减少唯一主机名的数量会潜在地减少页面中并行下载的数量，所以要做好权衡

方法二：使用keep-alive 

通过重用现有连接，从而通过避免TCP/IP开销来减少响应时间



## 避免重定向

**重定向**用于将用户从一个URL重新路由到另一个URL。有很多种常用的是301和302

重定向的方法：

1. 服务器返回301 302，浏览器会自动将用户带到 Location 字段所给出的URL.。

2. HTML文档的头中包含的 meta refresh 标签可以在其 content 属性所指定的秒数之后重定向用户

   `<meta http-equiv="refresh" content="0;url=http://stevesouders.com/newuri"`

3. JavaScript 可以用于执行重定向，将 `document.location`设置为期望的 URL 即可



引发重定向：

1. 缺少结尾的斜线，会导致301

2. 连接网站，将旧网站连接到新网站，将一个网站的不同部分连接起来，基于一些条件(浏览器类型，用户账户类型等)来引导用户

3. 跟踪内部流量

   重定向经常用于跟踪用户流量的流向。

   也可以选择 Referer 日志来跟踪流量去向。所以可以用referer来避免重定向