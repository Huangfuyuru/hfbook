# JavaScript 常见的内存泄漏

## 什么是内存泄漏

内存泄漏是指当一块内存不再被应用程序使用的时候，由于某种原因，这块内存没有返还给操作系统或者内存池的现象。内存泄漏可能会导致应用程序卡顿或者崩溃。

JS有两种变量，全局变量和局部变量，局部变量的生命周期在函数执行过后结束，这时可以垃圾回收

全局变量的生命周期会持续到浏览器关闭页面。

## 常见的内存泄漏

##### 意外的全局变量

在非严格模式下，未定义的变量会自动绑定在全局对象上，当函数执行完毕后，这个变量本应该被销毁，但是因为已经绑定到了window上，无法被垃圾回收。

所有当我们使用完毕全局变量后，应该设置为null ，来让他被回收

##### 被遗忘的计时器或回调函数

##### JS中引用DOM

1. 用JSON键值对保存了DOM节点的数据结构，这个时候DOM元素存在两个引用：一个在DOM树中，另一个在字典中。当我们要删除这些DOM时，需要把两个引用都清除

2. 如果保存了一个子节点，当我们删除这个DOM时会删不掉，因为子节点引用了父节点。

   比如在JavaScript代码中保存了表格某一个td的引用，当我们删除整个表格时，以为会删除了除td以外的所有节点，其实不是，因为td是表格的子节点，子元素和父元素是引用关系，所以整个表格还在内存中

##### 闭包

